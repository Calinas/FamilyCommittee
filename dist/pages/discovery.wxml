
  <view class="common-container common-container-grey _3d3b338" style="position:relative" bindtap="closeToggle">
    <view class="img-mask _3d3b338">
      <image src="/images/banner3.jpg" mode="scaleToFill" class="bg-img _3d3b338"/>
      <view class="btn btn-set flex-wrapper center _3d3b338" catchtap="toggleMenu" data-wpytogglemenu-a="setFlag">
        <text class="iconfont icon-edit _3d3b338"/>
        <navigator url="createClass?type=join" open-type="navigate" class="_3d3b338">
        <text class="_3d3b338">加入班级</text>
        </navigator>
      </view>
    </view>

    <view class="item-wrapper _3d3b338"  wx:if="{{list.length}}">
      <block wx:for="{{list}}" wx:key="key" wx:for-index="listIndex" class="_3d3b338">
         <view class="item _3d3b338">
          <view class="flex-wrapper center between _3d3b338">
            <view class="flex-wrapper center _3d3b338">
              <image src="{{item.member.head_img}}" class="small-avatar _3d3b338"/>
              <text class="font-32 _3d3b338">{{item.member.class_nickname}}发布了{{type[item.app_type]}}</text>
            </view>
            <block wx:if="{{memberInfo.member_id === item.member.id}}" class="_3d3b338">
                <!-- 是本人且是付款以外的其他类型 / 是本人且是付款且付款数目为0 -->
                <block wx:if="{{item.app_type !== 'collection'}}" class="_3d3b338">
                  <view class="font-grey iconfont icon-shanchu text-right _3d3b338" catchtap="removeCircle" data-wpyremovecircle-a="{{item.id}}" data-wpyremovecircle-b="{{listIndex}}"/>
                </block>
                <block wx:if="{{item.app_type === 'collection' && item.info.total_money <= 0}}" class="_3d3b338">
                  <view class="font-grey iconfont icon-shanchu text-right _3d3b338" catchtap="removeCircle" data-wpyremovecircle-a="{{item.id}}" data-wpyremovecircle-b="{{listIndex}}"/>
                </block>
              </block>
          </view>
          <view class="item-desc font-36 _3d3b338">{{item.info.description}}</view>
          <view class="img-list flex-wrapper one-img _3d3b338" wx:if="{{item.image.length === 1}}">
            <image mode="widthFix" src="{{img+'?imageMogr2/thumbnail/300x/gravity/Center/crop/640x360'}}" wx:key="keyIndex" lazy-load="lazy-load" wx:for-item="img" wx:for="{{item.image}}" class="img-item _3d3b338" bindtap="preview" data-wpypreview-a="{{img}}" data-wpypreview-b="{{item.image}}"/>
          </view>
          <view class="img-list flex-wrapper _3d3b338" wx:else>
            <image src="{{img+'?imageMogr2/thumbnail/300x/gravity/Center/crop/640x360'}}" wx:key="keyIndex" lazy-load="lazy-load" wx:for-item="img" wx:for="{{item.image}}" class="img-item _3d3b338" bindtap="preview" data-wpypreview-a="{{img}}" data-wpypreview-b="{{item.image}}"/>
          </view>

          <view class="flex-wrapper icon-container _3d3b338">
            <text class="font-grey font-small from-school _3d3b338">来自{{item.class.name}}</text>
            <view class="flex-wrapper icon-wrapper _3d3b338">
              <view class="font-grey iconfont icon-dianzan text-right _3d3b338" catchtap="addLike" data-wpyaddlike-a="{{item.id}}" data-wpyaddlike-b="{{listIndex}}" data-wpyaddlike-c="{{item.is_like}}"/>
              <view class="font-grey iconfont icon-message text-right _3d3b338" catchtap="addComment" data-wpyaddcomment-a="add" data-wpyaddcomment-b="{{item.id}}"/>
              <view class="font-grey iconfont icon-share text-right _3d3b338" catchtap="shareCircle"/>
            </view>
          </view>
          <view class="font-grey _3d3b338" wx:if="{{item.like_list.count}}">
            <text class="iconfont icon-xin _3d3b338" style="margin-right: 10rpx;"/>
            <text wx:for="{{item.like_list.list}}" wx:for-item="like" wx:key="{{keyIndex}}" class="_3d3b338">{{like.member.nickname}}<text wx:if="{{index !== item.like_list.count - 1}}" class="_3d3b338">，</text></text>共{{item.like_list.count}}人觉得很赞
          </view>
          <view class="comment-wrapper font-grey _3d3b338" wx:if="{{item.comment_list.count}}">
            <view class="item _3d3b338" wx:for="{{item.comment_list.list}}" wx:for-item="comment" wx:key="key">
              <block wx:if="{{comment.to_member && comment.to_member.class_nickname}}" class="_3d3b338">
                <text class="font-blue _3d3b338" bindtap="addComment" data-wpyaddcomment-a="reply" data-wpyaddcomment-b="{{item.id}}" data-wpyaddcomment-c="{{comment.id}}" data-wpyaddcomment-d="{{comment.member.id}}" data-wpyaddcomment-e="{{comment.member.class_nickname}}">{{comment.member.class_nickname}}</text>回复<text class="font-blue _3d3b338" bindtap="addComment" data-wpyaddcomment-a="reply" data-wpyaddcomment-b="{{item.id}}" data-wpyaddcomment-c="{{comment.id}}" data-wpyaddcomment-d="{{comment.to_member.id}}" data-wpyaddcomment-e="{{comment.to_member.class_nickname}}">{{comment.to_member.class_nickname}}：</text>
              </block>
              <block wx:else class="_3d3b338">
                <text class="font-blue _3d3b338" bindtap="addComment" data-wpyaddcomment-a="reply" data-wpyaddcomment-b="{{item.id}}" data-wpyaddcomment-c="{{comment.id}}" data-wpyaddcomment-d="{{comment.member.id}}" data-wpyaddcomment-e="{{comment.member.class_nickname}}">{{comment.member.class_nickname}}: </text>
              </block>
              <text class="_3d3b338">{{comment.content}}</text>
            </view>
            <view wx:if="{{item.comment_list.count > 6 && !item.commentLoadFinished}}" class="text-center _3d3b338" bindtap="loadMoreComment" data-wpyloadmorecomment-a="{{item.id}}" data-wpyloadmorecomment-b="{{listIndex}}">
              <text class="font-blue font-small _3d3b338">加载更多评论</text>
            </view>
          </view>
        </view>
      </block>
    </view>
    
  <view class="wx-popup _e888540 _3d3b338"  wx:if="{{$CurrentModal$flag}}">
    <view class="popup-container _e888540">
      <view class="wx-popup-con _e888540">
        <!-- <textarea type="text" placeholder={{placeholderText}} bindinput="bindInput" value="{{commentInput}}"></textarea> -->
        <input type="text" placeholder="{{$CurrentModal$placeholderText}}" bindinput="$CurrentModal$bindInput" value="{{$CurrentModal$commentInput}}" cursor-spacing="100" class="_e888540"/>
      </view>
      <view class="wx-popup-btn _e888540">
        <text class="btn-no _e888540" bindtap="$CurrentModal$cancelFn">{{$CurrentModal$cancelBtnText}}</text>
        <text class="btn-ok _e888540" bindtap="$CurrentModal$sureFn">{{$CurrentModal$sureBtnText}}</text>
      </view>
    </view>
  </view>
    
  <view class="wx-popup _7d93963 _3d3b338"  wx:if="{{$SelectModal$flag}}">
    <view class="popup-container _7d93963">
      <view class="wx-popup-con _7d93963">
        <checkbox-group class="width80 _7d93963" bindchange="$SelectModal$pickerChange" id="type">
          <label class="radio _7d93963" wx:for="{{$SelectModal$list}}">
            <checkbox value="{{item.id}}" checked="{{item.checked}}" class="_7d93963"/>
            {{item.name}}
          </label>
        </checkbox-group>
      </view>
      <view class="wx-popup-btn _7d93963">
        <text class="btn-no _7d93963" bindtap="$SelectModal$cancelFn">取消</text>
        <text class="btn-ok _7d93963" bindtap="$SelectModal$sureFn">确认</text>
      </view>
    </view>
  </view>
    
  <view class="wx-popup _9d46840 _3d3b338"  wx:if="{{$shareModal$flag}}">
    <view class="popup-container _9d46840">
      <view class="wx-popup-con _9d46840">
        <text class="share-title _9d46840">{{$shareModal$title}}</text>
        <image src="{{$shareModal$imgSrc}}" class="share-img _9d46840"/>
      </view>
      <view class="wx-popup-btn _9d46840">
        <button bindtap="$shareModal$cancelFn" class="_9d46840">取消</button>
        <button open-type="share" bindtap="$shareModal$sureFn" class="_9d46840">确认分享</button>
      </view>
    </view>
  </view>
  </view>